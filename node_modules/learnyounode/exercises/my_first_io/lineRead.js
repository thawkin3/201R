var fs = require('fs');
var lineReader = require('readline').createInterface({
  input: require('fs').createReadStream('CKE.csv')
});

var allPossibleChoices =
		{
			"Ak" : {

			},

			"Al" : {
				
			},

			"Ar" : {

			},

			"Az" : {
				
			},

			"Ca" : {
				
			},

			"Co" : {
				
			},

			"De" : {
				
			},

			"Fl" : {
				
			},

			"Ga" : {
				
			},

			"Hi" : {
				
			},

			"Ia" : {
				
			},

			"Id" : {
				
			},

			"Il" : {
				
			},

			"In" : {
				
			},

			"Ks" : {
				
			},

			"Ky" : {
				
			},

			"La" : {
				
			},

			"Md" : {
				
			},

			"Mi" : {
				
			},

			"Mn" : {
				
			},

			"Mo" : {
				
			},

			"Ms" : {
				
			},

			"Mt" : {
				
			},

			"Nc" : {
				
			},

			"Nd" : {
				
			},

			"Ne" : {
				
			},

			"Nj" : {
				
			},

			"Nm" : {
				
			},

			"Nv" : {
				
			},

			"Ny" : {
				
			},

			"Oh" : {
				
			},

			"Ok" : {
				
			},

			"Or" : {
				
			},

			"Pa" : {
				
			},

			"Sc" : {
				
			},

			"Sd" : {
				
			},

			"Tn" : {
				
			},

			"Tx" : {
				
			},

			"Ut" : {
				
			},

			"Va" : {
				
			},

			"Wa" : {
				
			},

			"Wi" : {
				
			},

			"Wv" : {
				
			},

			"Wy" : {
				
			}
		};

lineReader.on('line', function (line) {
  //console.log('Line from file:', line);
  var entries = line.split(",");
  //console.log(entries);

  if (allPossibleChoices[entries[0]].hasOwnProperty(entries[1])) {
  	allPossibleChoices[entries[0]][entries[1]].push(entries[2]);
  } else {
  	allPossibleChoices[entries[0]][entries[1]] = [entries[2]];
  }

  //console.log(allPossibleChoices);

});

lineReader.on('close', function() {
	console.log(allPossibleChoices);
	fs.writeFile('CKE.json', JSON.stringify(allPossibleChoices, null, 4), function(err) {
	  if (err) throw err;
	  console.log('It\'s saved!');
	});
})


